<!DOCTYPE html>
<html lang="en">
<head>
	<style type="text/css">
	
	*{
		margin: 0;
		padding: 0;
		border: 0;
		font-size: 100%;
		font: inherit;
		vertical-align: baseline;
	}

	.col-md-3{
		border:2px solid #30AED3;
		text-align: center;
		word-wrap:break-word;
	}

	.secla{
		border:1px solid #aaa;
		height: 336px;
		overflow-y: scroll; 
	}
	textarea {
		resize:none;
	}
	ol{
		vertical-align: bottom;
	}
	.secbox{
		height:110px;
		width:258px;
		overflow-y: scroll; 
		
	}

	</style>

	<!-- Latest compiled and minified CSS -->
	<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.2.0/css/bootstrap.min.css">
	<!-- Optional theme -->
	<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.2.0/css/bootstrap-theme.min.css">
	<!-- Latest compiled and minified JavaScript -->
	<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>
	<script src="/javascripts/jquery.jscroll.js"></script>
	<script src="/javascripts/jquery.simplyCountable.js"></script>
	<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.2.0/js/bootstrap.min.js"></script>
	<script type="text/javascript">

	$(document).ready(function(){

		var inside = $('.secla').innerHeight();
		var count = 0;
		var divs = 0;


		function maxLength(el) {    
			if (!('maxLength' in el)) {
				var max = el.attributes.maxLength.value;
				el.keyup = function () {
					if (this.value.length >= max) return false;
				};
			}
		}

		maxLength(document.getElementById("texs"));
		
		function updateCountdown() {
    		// 150 is the max message length
    		var remaining = 150 - $('#texs').val().length;
    		$('.countdown').text(remaining + ' characters remaining');

    	}

    	$(secs).click(function(){
    		
    		function calculateLIsInRow() {


    			$('.fussy').each(function() {
    				if($(this).prev().length > 0) {
    					if($(this).position().top != $(this).prev().position().top) return false;
    					divs++;
    				}
    				else {
    					divs++;   
    				}
    			});
    			console.log('No: of div in a row = ' + divs);
    		}	
    		calculateLIsInRow();

    		$('#secla').resize(calculateLIsInRow);

    		count++;
    		var fusec =	$('#texs').val();
    		// if (divs <= 4){
    			$('.fussy').append("<div class='col-md-3 secbox'><p id='awesome"+count+"''>"+fusec+"</p></div>")
    		// } else if (divs > 4){

    		// 	$('.rossy').append("<div class='col-md-3 secbox'><p id='awesome"+count+"''>"+fusec+"</p></div>")
    		// }


    		$('#texs').val('');
    		var remaining = 150 - $('#texs').val().length;
    		$('.countdown').text(remaining + ' characters remaining')
    		$('#secs').prop('disabled', true);
    		return false;
    	})

    	$('.secla').scroll(function(){

    		//109 is $('.secla').height()
    		$('.secla').scrollTop() >= $('.secla').height()+100;
    		$('.fussy:first-child').fadeOut(500, function(){
    			$(this).remove();
    			// $('#ro').attr('id', 'fus')
    			// $('.rossy').attr('class','fussy')
    			$('#fus').append("<div class='col large 3 fussy'></div>")
    			// divs - 4;
    			// $('#ro').attr('id', 'fus');
    			// console.log(divs)
    		});

    	});


    	$('#secrets').on('click' , function() {
    		if( $.trim($('#texs').val()).length > 0 ){
    			$('#secs').prop('disabled', false);
    		}
    		else {
    			$('#secs').prop('disabled', true);
    		}

    	});

    	updateCountdown();
    	$('#texs').change(updateCountdown);
    	$('#texs').keyup(updateCountdown);

    });

$('#refresh').click(function() {
	location.reload();
});


</script>
</head>

<body>

	<div class="navbar navbar-inverse navbar-fixed-top" role="navigation">
		<div class="container">
			<div class="navbar-header">
				<button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target=".navbar-collapse">
					<span class="sr-only">Toggle navigation</span>
					<span class="icon-bar"></span>
					<span class="icon-bar"></span>
					<span class="icon-bar"></span>
				</button>
				<a id='refresh' class="navbar-brand" href="">Secrets...</a>
			</div>
		<!-- 	<div class="navbar-collapse collapse">
				<form class="navbar-form navbar-right" role="form">
					<div class="form-group">
						<input type="text" placeholder="Email" class="form-control">
					</div>
					<div class="form-group">
						<input type="password" placeholder="Password" class="form-control">
					</div>
					<button type="submit" class="btn btn-info">Sign in</button>
					<button type="submit" class="btn btn-danger">Sign up</button>
				</form> -->
			</div><!--/.navbar-collapse -->
		</div>
	</div>

	<div class="jumbotron">
		<div class="container">		
			<h1 align='center'>Don't Blink</h1>
			<p align='center'>Secrets below disappear as you scroll</p>
		</div>

		<form align='center' id='secrets'>
			Secret: 
			<div><textarea maxlength="150" name='texs' id='texs'></textarea></div>
			<span class="countdown"></span>
			<div><button id='secs' type='submit' class='btn btn-info' value='submit' disabled>Submit Secret</button></div>
		</form>

	</div>

	<div class="container secla">

		<div>
			<div class='row' id='fus'>
				<div class='col large 3 fussy'></div>
			</div>

			
		<!-- 	<div class='row' id='ro'>
				<div class='col large 3 rossy'></div>
			</div> -->

		</div>


	</div> <!-- /container -->
	<ol align='center' class="breadcrumb">
		<li><a href="https://www.youtube.com/watch?v=jKXLkWrBo7o">Don't...blink</a></li>
	</ol>


	
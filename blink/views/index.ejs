<!DOCTYPE html>
<html lang="en">
<head>
	<style type="text/css">

	.secbox{
		border:2px solid aquamarine;
		text-align: center;
	}
	#awesome{
		word-wrap:break-word;
	}
	.secla{
		border:1px solid #aaa;
		height: 350px;
		overflow-y: scroll; 
	}
	textarea {
		resize:none;
	}
	ol{
		vertical-align: bottom;
	}

	</style>

	<!-- Latest compiled and minified CSS -->
	<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.2.0/css/bootstrap.min.css">
	<!-- Optional theme -->
	<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.2.0/css/bootstrap-theme.min.css">
	<!-- Latest compiled and minified JavaScript -->
	<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>
	<script src="/javascripts/jquery.jscroll.js"></script>
	<script src="/javascripts/jquery.simplyCountable.js"></script>
	<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.2.0/js/bootstrap.min.js"></script>
	<script type="text/javascript">


	$(document).ready(function(){

		function maxLength(el) {    
			if (!('maxLength' in el)) {
				var max = el.attributes.maxLength.value;
				el.keyup = function () {
					if (this.value.length >= max) return false;
				};
			}
		}

		maxLength(document.getElementById("texs"));
		
		function updateCountdown() {
    		// 150 is the max message length
    		var remaining = 150 - $('#texs').val().length;
    		$('.countdown').text(remaining + ' characters remaining');

    	}


    	$(secs).click(function(){
				// event.preventDefault(); <-- prevents the page from reloading on sumbission 
				var fusec =	$('#texs').val();
				$('#fus').append("<div class='col-md-3 secbox'><p id='awesome'>"+fusec+"</p></div>")
				$('#texs').val('');
				var remaining = 150 - $('#texs').val().length;
				$('.countdown').text(remaining + ' characters remaining')
				return false;
			})

    	$('#secrets').on('keyup' , function() {
    		if( $.trim($('#texs').val()).length > 0 ){
    			$('#secs').prop('disabled', false);
    		}
    		else {
    			$('#secs').prop('disabled', true);
    		}
    	});



    	$(fus).delegate(".secbox", "click", function(e){
    		e.target.parentNode.remove();
				// console.log(e.target.parentNode);
			})
    	$('#fus').jscroll();

    	updateCountdown();
    	$('#texs').change(updateCountdown);
    	$('#texs').keyup(updateCountdown);

    });

</script>
</head>

<body>

	<div class="navbar navbar-inverse navbar-fixed-top" role="navigation">
		<div class="container">
			<div class="navbar-header">
				<button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target=".navbar-collapse">
					<span class="sr-only">Toggle navigation</span>
					<span class="icon-bar"></span>
					<span class="icon-bar"></span>
					<span class="icon-bar"></span>
				</button>
				<a class="navbar-brand" href="#">Secrets...</a>
			</div>
			<div class="navbar-collapse collapse">
				<form class="navbar-form navbar-right" role="form">
					<div class="form-group">
						<input type="text" placeholder="Email" class="form-control">
					</div>
					<div class="form-group">
						<input type="password" placeholder="Password" class="form-control">
					</div>
					<button type="submit" class="btn btn-info">Sign in</button>
					<button type="submit" class="btn btn-danger">Sign up</button>
				</form>
			</div><!--/.navbar-collapse -->
		</div>
	</div>

	<!-- Main jumbotron for a primary marketing message or call to action -->
	<div class="jumbotron">
		<div class="container">		
			<h1 align='center'>Don't Blink</h1>
			<p align='center'>Secrets below disappear as you scroll</p>
		</div>

		<form align='center' id='secrets'>
			Secret:
			<div><textarea maxlength="150" name='texs' id='texs'></textarea></div>
			<span class="countdown"></span>
			<div><button id='secs' type='submit' class='btn btn-info' value='submit' disabled>Submit Secret</button></div>
		</form>

	</div>

	<div class="container secla">
		<!-- Example row of columns -->
		<div id='fus' class="row"></div>

	</div> <!-- /container -->
	<ol align='center' class="breadcrumb">
		<li><a href="#">Log Out</a></li>
	</ol>


	<!-- 	$("#texs").keydown(function(){
		var counter = $("#texs").simplyCountable()
		console.log(counter)
	}); -->
	